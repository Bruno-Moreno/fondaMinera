---
title: "Datasets Ingresos por comunas, regiones y país"
output: html_notebook
---


```{r, eval=F, message=F}
install.packages("reshape")
install.packages("tidyverse")
install.packages("ggplot2")
install.packages("tm")
```


```{r}
#Cargar Datasets Ingresos

df_ingresos_comunas<-read_csv("dataset/comuna_data_all.csv")
df_ingresos_region<-read_csv("dataset/region_data_all.csv")
df_ingresos_country<-read_csv("dataset/country_data_all.csv")

comunas_id<- read_csv("2017_06_27_comunas_datachile_fixed.csv")
```

#Algunas Estadísticas por Comunas


```{r}
#comuna_data_all

df_nombres_comunas<-comunas_id[c('comuna_datachile_id','comuna_name')]
df_nombres_comunas<-df_nombres_comunas[order(df_nombres_comunas$'comuna_datachile_id'),]
df_nombres_comunas<-rename(df_nombres_comunas, geography_id=comuna_datachile_id)

df = merge(x = df_nombres_comunas, y = df_ingresos_comunas, by = "geography_id")

filtro <- df %>%
    filter((df$comuna_name == 'Las Condes' | df$comuna_name=='Laja') | (df$comuna_name== 'Lo Prado') | df$comuna_name== 'Quilicura') 

boxplot(df$weighted_mean_income ~ df$year,ylim=c(18000,1500000), xlab = 'Year' , ylab = 'mean_income',main="Boxplot",col='dark blue')

boxplot(filtro$weighted_mean_income ~ filtro$comuna_name,ylim=c(18000,300000), xlab = 'Comunas' , ylab = 'mean_income',main="Boxplot",col='sky blue')

boxplot(filtro$weighted_mean_income ~ filtro$comuna_name,ylim=c(18000,1500000), xlab = 'Comunas' , ylab = 'mean_income',main="Boxplot",col='sky blue')



```
#Estadísticas de Ingresos por Regiones

```{r}
#df_ingresos_region



filtro <- df_ingresos_region %>%
    filter(df_ingresos_region$geography_id == 8 )

boxplot(df_ingresos_region$weighted_mean_income ~ df_ingresos_region$year,ylim=c(0,350000), xlab = 'Year' , ylab = 'mean_income',main="Ingresos v/s años",col='dark blue')

boxplot(df_ingresos_region$weighted_mean_income ~ df_ingresos_region$geography_id,ylim=c(18000,350000), xlab = 'Regiones' , ylab = 'mean_income',main="Ingresos por región",col='sky blue')

#boxplot(filtro$weighted_mean_income ~ filtro$comuna_name,ylim=c(18000,1500000), xlab = 'Comunas' , ylab = 'mean_income',main="Boxplot",col='sky blue')



```
#Estadísticas nivel país

```{r}
#df_ingresos_region


plot(df_ingresos_country$weighted_mean_income ~ df_ingresos_country$year,ylim=c(0,350000), xlab = 'Year' , ylab = 'mean_income',main="Ingresos v/s años",col='dark blue',type='l')




```
